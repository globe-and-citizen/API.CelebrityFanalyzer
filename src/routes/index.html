<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="SwaggerUI" />
    <title>API Documentation</title>
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5.4.2/swagger-ui.css" />
  </head>
  <body>
    <div id="swagger-ui"></div>
    <script src="https://unpkg.com/swagger-ui-dist@5.4.2/swagger-ui-bundle.js" crossorigin></script>
    <script>
      window.onload = function () {
        const ui = SwaggerUIBundle({
          spec: spec,
          dom_id: '#swagger-ui'
        })
      }

      // Swagger Documentation: https://swagger.io/docs/specification/about/
      // Example: https://petstore.swagger.io/v2/swagger.json
      var spec = {
        openapi: '3.0.1',
        info: {
          description: 'This is the API documentation for Celebrity Fanalyzer.',
          version: '1.0.0',
          title: 'Celebrity Fanalyzer API',
          license: {
            name: 'GNU General Public License v2.0',
            url: 'https://github.com/globe-and-citizen/Celebrity-Fanalyzer/blob/main/LICENSE.md'
          }
        },
        externalDocs: {
          description: 'Find out more about Celebrity Fanalyzer',
          url: 'https://github.com/globe-and-citizen/celebrity-fanalyzer'
        },
        // servers: [{ url: '/' }],
        paths: {
          '/prompts': {
            get: {
              summary: 'Get a list of all prompts.',
              operationId: 'listPrompts',
              tags: ['Collections API'],
              responses: {
                200: {
                  description: 'Success',
                  content: {
                    'application/json': {
                      schema: {
                        $ref: '#/components/schemas/Collection'
                      }
                    }
                  }
                },
                404: {
                  $ref: '#/components/responses/NotFound'
                }
              }
            }
          },
          '/entries': {
            get: {
              summary: 'Get a list of all entries.',
              operationId: 'listEntries',
              tags: ['Collections API'],
              responses: {
                200: {
                  description: 'Success',
                  content: {
                    'application/json': {
                      schema: { $ref: '#/components/schemas/Collection' }
                    }
                  }
                },
                404: {
                  $ref: '#/components/responses/NotFound'
                }
              }
            }
          },
          '/prompts/{id}/visitors': {
            get: {
              summary: 'Get visitors from a prompt.',
              operationId: 'getPrompt',
              tags: ['Subcollections API'],
              parameters: [
                {
                  $ref: '#/components/parameters/id'
                }
              ],
              responses: {
                // 200: {
                //   description: 'Success',
                //   content: {
                //     'application/json': {
                //       schema: {
                //         $ref: '#/components/schemas/Article'
                //       }
                //     }
                //   }
                // },
                404: {
                  $ref: '#/components/responses/NotFound'
                }
              }
            }
          }
        },

        components: {
          schemas: {
            Collection: {
              type: 'array',
              items: {
                $ref: '#/components/schemas/Document'
              }
            },
            Document: {
              type: 'object',
              properties: {
                id: {
                  $ref: '#/components/parameters/id'
                },
                title: {
                  type: 'string',
                  example: 'Lorem Ipsum'
                },
                slug: {
                  type: 'string',
                  example: 'lorem-ipsum'
                }
              },
              xml: {
                name: 'Document' // Coloque o nome como uma string
              },
              required: ['id', 'title', 'slug']
            },
            Subcollection: {
              type: 'array',
              items: {
                type: 'object',
                properties: {
                  id: {
                    $ref: '#/components/parameters/id'
                  }
                },
                required: ['id', 'title', 'slug']
              }
            }
          },
          parameters: {
            id: {
              name: 'id',
              in: 'path',
              // description: 'Document ID',
              required: true,
              type: 'string',
              example: '2023-11'
            }
          },
          responses: {
            NotFound: {
              description: 'Not Found',
              documentation_url: '/v1',
              content: {
                'application/json': {
                  schema: {
                    type: 'object',
                    properties: {
                      message: {
                        type: 'string',
                        example: 'Not Found'
                      },
                      documentation_url: {
                        type: 'string',
                        example: '/v1'
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    </script>
  </body>
</html>
